generator client {
  provider      = "prisma-client"
  output        = "../lib/generated/prisma"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid()) @db.Uuid
  email     String?  @unique
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("users")
}

model Image {
  id           String   @id @default(uuid()) @db.Uuid
  src          String
  alt          String
  width        Int      @default(550)
  height       Int      @default(384)
  order        Int      @default(0)
  priority     Boolean  @default(false)
  imageOffsetX Float    @default(50) @map("image_offset_x")
  imageOffsetY Float    @default(50) @map("image_offset_y")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@index([order])
  @@map("images")
}

model Track {
  id        String   @id @default(uuid()) @db.Uuid
  title     String
  subtitle  String
  src       String
  order     Int      @default(0)
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@index([order])
  @@map("tracks")
}

model Project {
  id           String   @id @default(uuid()) @db.Uuid
  title        String
  description  String
  image        String?
  link         String?
  category     String   @default("personal")
  cropX        Float?   @default(50) @map("crop_x")
  cropY        Float?   @default(50) @map("crop_y")
  cropSize     Float?   @default(100) @map("crop_size")
  imageOffsetX Float?   @default(0) @map("image_offset_x")
  imageOffsetY Float?   @default(0) @map("image_offset_y")
  scale        Float?   @default(1)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")
  order        Int      @default(0)

  @@index([order])
  @@map("projects")
}

model Comment {
  id        String            @id @default(uuid()) @db.Uuid
  text      String
  likes     Int               @default(0)
  fires     Int               @default(0)
  hearts    Int               @default(0)
  laughs    Int               @default(0)
  wows      Int               @default(0)
  createdAt DateTime          @default(now()) @map("created_at")
  updatedAt DateTime          @updatedAt @map("updated_at")
  reactions CommentReaction[]

  @@index([createdAt])
  @@map("comments")
}

model CommentReaction {
  id        String   @id @default(uuid()) @db.Uuid
  commentId String   @map("comment_id") @db.Uuid
  userId    String   @map("user_id")
  type      String
  createdAt DateTime @default(now()) @map("created_at")
  comment   Comment  @relation(fields: [commentId], references: [id], onDelete: Cascade)

  @@unique([commentId, userId, type])
  @@index([commentId])
  @@map("comment_reactions")
}

model ViewCount {
  id          String   @id @default("main")
  count       Int      @default(0)
  lastUpdated DateTime @default(now()) @updatedAt @map("last_updated")

  @@map("view_count")
}

model CountryVisit {
  id          String   @id @default(uuid()) @db.Uuid
  country     String   @unique
  count       Int      @default(0)
  lastUpdated DateTime @default(now()) @updatedAt @map("last_updated")
  lastVisit   DateTime @default(now()) @map("last_visit")

  @@index([country])
  @@map("country_visits")
}

model AdminStatus {
  id         String   @id @default("admin")
  lastActive DateTime @default(now()) @updatedAt @map("last_active")

  @@map("admin_status")
}
